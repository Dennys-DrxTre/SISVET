{% extends 'form.html' %} 
{% load static %}
{% load widget_tweaks %}
{% block form %}
<form action="post">
    <div class="card">
        <div class="card-body">
    
            <div class="row">
                <div class="col">
                    <div class="card card-secondary">
                        <div class="card-header">
                            <h3 class="card-title">Detalles de la Factura</h3>
                        </div>
                        <div class="card-body">
                            <input type="text" name="action" value="{{ action }}" hidden>
    
                            <div class="row">
    
                                <div class="form-group col-5">
                                    <label for="exampleInputPassword1">Proveedor:</label>
                                    {{ form.provider|add_class:'form-control'|attr:'name:provider'|add_class:'select22'|attr:'style:width:100%'|attr:'required'}}
                                </div>
        
                                <div class="form-group col">
                                    <label for="exampleInputPassword1">SubTotal:</label>
                                    {{ form.sub_total|add_class:'form-control'|attr:'name:sub_total'|attr:'placeholder:SubTotal'|attr:'readonly:readonly'}}
                                </div>
        
                                <div class="form-group col-md-4">
                                    <label for="exampleInputPassword1">Iva:</label>
                                    {{ form.iva|add_class:'form-control'|attr:'name:iva'|attr:'placeholder:Iva'|attr:'type:text'}}
                                </div>
        
                                <div class="form-group col">
                                    <label for="date">Total:</label>
                                    {{ form.total|add_class:'form-control'|attr:'name:total'|attr:'readonly:readonly'}}
                                </div>

        
                            </div>
                            <div class="row">
                                <div class="form-group col">
                                    <label for="date">Precio Dollar:</label>
                                    {{ form.price_dollar|add_class:'form-control'|attr:'name:price_dollar'|attr:'step:0.01'}}
<<<<<<< HEAD
                                    
=======
>>>>>>> b0891a40af8565bd3fc0e1b635d55a867dbce1e5
                                </div>
                                <div class="form-group col">
                                    <label for="date">Total Bs:</label>
                                    {{ form.total_bs|add_class:'form-control'|attr:'name:total_bs'|attr:'readonly:readonly'}}
                                </div>
                            </div>
    
    
    
                            <!-- /input-group -->
                        </div>
                        <!-- /.card-body -->
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="card card-secondary">
                        <div class="card-header">
                            <h3 class="card-title">Registrar Producto</h3>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">
                            <div class="row">
                                <label for="product">Buscador de Productos:</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" name="search" placeholder="Ingrese el nombre del producto" autocomplete="off">
                                    <span class="input-group-append">
                                      <button  type="button" class="btn btn-danger btn-flat btn_delete"><i class="fas fa-times"></i></button>
                                    </span>
                                  </div>
                            </div>
                        </div>
                        <hr />
                        <div class="card-body">
    
                            <table id="data2" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col" style="width: 10%;">F. Vencimiento</th>
                                        <th scope="col" style="width: 10%;">Producto</th>
                                        <th scope="col" style="width: 15%;">P. Compra</th>
                                        <th scope="col" style="width: 15%;">P. Venta</th>
                                        <th scope="col" style="width: 15%;">Cantidad</th>
                                        <th scope="col" style="width: 12%;">Ganancia</th>
                                        <th scope="col" style="width: 12%;">Total</th>
                                        <th scope="col" style="width: 10%;">Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <div class="card-footer">
                        <button type="button" onclick="PagePrevious()" class="btn btn-danger">Cancelar</button>
                        <button type="submit" class="btn btn-colores">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

{% endblock form %}

{% block script %} 

    $("input[name='price_dollar']").TouchSpin({
        verticalbuttons: true,
        verticalupclass: 'glyphicon glyphicon-plus',
        verticaldownclass: 'glyphicon glyphicon-minus',
        step: 0.01,
        decimals: 2,
        boostat: 5,
        maxboostedstep: 10,
        min: 0,
        initval: 0.00, 
    }).on('change', function () {
        vents.calculate_invoice();
    }).val({{ get_dollar|safe }});

    console.log({{ det|safe }})
    vents.items.products = {{ det|safe }};
    vents.list();



{% endblock script %}

{% block form.js %}
    <script src="{% static 'buy/form.js' %}"> </script>
{% endblock form.js %}
